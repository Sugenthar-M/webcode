<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>CodeWeb - Simple Web Editor</title>
  <style>
    :root {
      --bg-light: #f8f9fa;
      --bg-dark: #121212;
      --text-light: #212529;
      --text-dark: #f8f9fa;
      --panel-light: #ffffff;
      --panel-dark: #1e1e1e;
      --primary: #4361ee;
      --primary-dark: #3a56d4;
      --border: #dee2e6;
      --border-dark: #333;
      --header-height: 60px;
      --button-height: 40px;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background-color: var(--bg-light);
      color: var(--text-light);
      transition: background 0.3s, color 0.3s;
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .dark-mode {
      background-color: var(--bg-dark);
      color: var(--text-dark);
    }
    
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--header-height);
      padding: 0 15px;
      background: var(--panel-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border);
      z-index: 100;
    }
    
    .dark-mode .header {
      background: var(--panel-dark);
      border-color: var(--border-dark);
    }
    
    .header h1 {
      color: var(--primary);
      font-size: 1.3rem;
      white-space: nowrap;
    }
    
    .menu-bar {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      padding: 5px 0;
    }
    
    .menu-bar::-webkit-scrollbar {
      display: none;
    }
    
    .menu-bar button {
      background: none;
      border: none;
      color: var(--text-light);
      cursor: pointer;
      font-weight: 500;
      padding: 6px 8px;
      border-radius: 4px;
      font-size: 0.85rem;
      white-space: nowrap;
      flex-shrink: 0;
    }
    
    .dark-mode .menu-bar button {
      color: var(--text-dark);
    }
    
    .menu-bar button:hover {
      background: rgba(67, 97, 238, 0.1);
    }
    
    .dark-mode .menu-bar button:hover {
      background: rgba(67, 97, 238, 0.2);
    }
    
    .menu-bar button i {
      font-size: 0.9rem;
    }
    
    .main-content {
      margin-top: var(--header-height);
      padding-bottom: 60px;
    }
    
    .editor-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 10px;
    }
    
    .editor-pane {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 150px;
    }
    
    .editor-header {
      padding: 8px 12px;
      background: rgba(67, 97, 238, 0.1);
      border-radius: 5px 5px 0 0;
      font-weight: 500;
      font-size: 0.9rem;
    }
    
    .dark-mode .editor-header {
      background: rgba(67, 97, 238, 0.2);
    }
    
    .code-editor {
      flex: 1;
      min-height: 150px;
      padding: 10px;
      border: 1px solid var(--border);
      border-top: none;
      background: var(--panel-light);
      color: var(--text-light);
      font-family: 'Fira Code', monospace;
      font-size: 14px;
      line-height: 1.5;
      border-radius: 0 0 5px 5px;
      resize: none;
      tab-size: 2;
      -webkit-overflow-scrolling: touch;
    }
    
    .dark-mode .code-editor {
      background: var(--panel-dark);
      color: var(--text-dark);
      border-color: var(--border-dark);
    }
    
    .buttons {
      display: flex;
      gap: 8px;
      padding: 0 10px 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    button {
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      background: var(--primary);
      color: white;
      cursor: pointer;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.85rem;
      height: var(--button-height);
      flex-shrink: 0;
    }
    
    button:hover {
      background: var(--primary-dark);
    }
    
    .output-container {
      padding: 0 10px 10px;
    }
    
    iframe {
      width: 100%;
      height: 300px;
      border: 1px solid var(--border);
      background: white;
      border-radius: 5px;
    }
    
    .dark-mode iframe {
      border-color: var(--border-dark);
    }
    
    .learning-panel {
      display: none;
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      max-width: 350px;
      background: var(--panel-light);
      border-left: 1px solid var(--border);
      padding: 15px;
      overflow-y: auto;
      z-index: 200;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    
    .learning-panel.show {
      display: block;
      transform: translateX(0);
    }
    
    .dark-mode .learning-panel {
      background: var(--panel-dark);
      border-color: var(--border-dark);
    }
    
    .learning-panel h2 {
      margin-bottom: 15px;
      color: var(--primary);
      padding-right: 30px;
    }
    
    .learning-item {
      margin-bottom: 15px;
      padding: 10px;
      background: rgba(67, 97, 238, 0.1);
      border-radius: 5px;
      cursor: pointer;
    }
    
    .dark-mode .learning-item {
      background: rgba(67, 97, 238, 0.2);
    }
    
    .learning-item:hover {
      background: rgba(67, 97, 238, 0.3);
    }
    
    .learning-item h3 {
      margin-bottom: 5px;
      font-size: 1rem;
    }
    
    .learning-item p {
      font-size: 0.85rem;
      opacity: 0.8;
    }
    
    .close-panel {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-light);
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .dark-mode .close-panel {
      color: var(--text-dark);
    }
    
    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 150;
    }
    
    .overlay.show {
      display: block;
    }
    
    .mobile-tabs {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--panel-light);
      border-top: 1px solid var(--border);
      z-index: 100;
      padding: 5px 0;
    }
    
    .dark-mode .mobile-tabs {
      background: var(--panel-dark);
      border-color: var(--border-dark);
    }
    
    .mobile-tabs button {
      flex: 1;
      background: none;
      border: none;
      padding: 10px;
      color: var(--text-light);
      font-size: 0.8rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3px;
    }
    
    .dark-mode .mobile-tabs button {
      color: var(--text-dark);
    }
    
    .mobile-tabs button i {
      font-size: 1.1rem;
    }
    
    .mobile-tabs button.active {
      color: var(--primary);
    }
    
    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.1rem;
      }
      
      .menu-bar button span {
        display: none;
      }
      
      .menu-bar button i {
        font-size: 1rem;
      }
      
      .mobile-tabs {
        display: flex;
      }
      
      .editor-pane {
        display: none;
      }
      
      .editor-pane.active {
        display: flex;
      }
      
      .buttons button {
        flex: 1 1 40%;
        justify-content: center;
      }
      
      .learning-panel {
        max-width: 100%;
      }
    }
    
    @media (min-width: 769px) {
      .editor-container {
        flex-direction: row;
      }
      
      .editor-pane {
        min-height: 300px;
      }
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <div class="header">
    <h1>CodeWeb</h1>
    <div class="menu-bar">
      <button onclick="toggleLearningPanel()"><i class="fas fa-book"></i> <span>Learning</span></button>
      <button onclick="runCode()"><i class="fas fa-play"></i> <span>Run</span></button>
      <button onclick="saveCode()"><i class="fas fa-save"></i> <span>Save</span></button>
      <button onclick="loadExample()"><i class="fas fa-lightbulb"></i> <span>Example</span></button>
      <button onclick="toggleMode()"><i class="fas fa-moon"></i> <span>Theme</span></button>
    </div>
  </div>
  
  <div class="main-content">
    <div class="editor-container">
      <div class="editor-pane active" id="html-pane">
        <div class="editor-header">HTML</div>
        <textarea id="html-code" class="code-editor" placeholder="Write HTML here..." spellcheck="false"></textarea>
      </div>
      
      <div class="editor-pane" id="css-pane">
        <div class="editor-header">CSS</div>
        <textarea id="css-code" class="code-editor" placeholder="Write CSS here..." spellcheck="false"></textarea>
      </div>
      
      <div class="editor-pane" id="js-pane">
        <div class="editor-header">JavaScript</div>
        <textarea id="js-code" class="code-editor" placeholder="Write JavaScript here..." spellcheck="false"></textarea>
      </div>
    </div>
    
    <div class="buttons">
      <button onclick="formatCode('html')"><i class="fas fa-indent"></i> Format HTML</button>
      <button onclick="formatCode('css')"><i class="fas fa-indent"></i> Format CSS</button>
      <button onclick="formatCode('js')"><i class="fas fa-indent"></i> Format JS</button>
      <button onclick="clearCode()"><i class="fas fa-trash"></i> Clear</button>
    </div>
    
    <div class="output-container">
      <iframe id="output" title="Code Output"></iframe>
    </div>
  </div>
  
  <div class="mobile-tabs">
    <button class="active" onclick="switchTab('html')"><i class="fas fa-code"></i>HTML</button>
    <button onclick="switchTab('css')"><i class="fab fa-css3-alt"></i>CSS</button>
    <button onclick="switchTab('js')"><i class="fab fa-js-square"></i>JS</button>
    <button onclick="runCode()"><i class="fas fa-play"></i>Run</button>
  </div>
  
  <div class="overlay" id="overlay"></div>
  
  <div class="learning-panel" id="learning-panel">
    <button class="close-panel" onclick="toggleLearningPanel()">&times;</button>
    <h2>Learning Resources</h2>
    
    <div class="learning-item" onclick="insertCode('html-basic')">
      <h3>HTML Basics</h3>
      <p>Basic HTML structure with heading and paragraph</p>
    </div>
    
    <div class="learning-item" onclick="insertCode('css-basic')">
      <h3>CSS Basics</h3>
      <p>Simple CSS styling for a container</p>
    </div>
    
    <div class="learning-item" onclick="insertCode('js-basic')">
      <h3>JavaScript Basics</h3>
      <p>Simple function that shows an alert</p>
    </div>
    
    <div class="learning-item" onclick="insertCode('html-form')">
      <h3>HTML Form</h3>
      <p>Basic form with input fields</p>
    </div>
    
    <div class="learning-item" onclick="insertCode('css-flex')">
      <h3>CSS Flexbox</h3>
      <p>Simple flexbox layout example</p>
    </div>
    
    <div class="learning-item" onclick="insertCode('js-event')">
      <h3>JavaScript Event</h3>
      <p>Button click event handler</p>
    </div>
  </div>

  <script>
    // DOM Elements
    const htmlEditor = document.getElementById('html-code');
    const cssEditor = document.getElementById('css-code');
    const jsEditor = document.getElementById('js-code');
    const outputFrame = document.getElementById('output');
    const learningPanel = document.getElementById('learning-panel');
    const overlay = document.getElementById('overlay');
    const htmlPane = document.getElementById('html-pane');
    const cssPane = document.getElementById('css-pane');
    const jsPane = document.getElementById('js-pane');
    const mobileTabButtons = document.querySelectorAll('.mobile-tabs button');
    
    // Auto-complete tags when typing
    htmlEditor.addEventListener('keydown', function(e) {
      if (e.key === '>') {
        const cursorPos = this.selectionStart;
        const textBefore = this.value.substring(0, cursorPos);
        
        // Check if we're at the start of a tag
        const tagMatch = textBefore.match(/<([a-zA-Z][a-zA-Z0-9]*)$/);
        if (tagMatch) {
          e.preventDefault();
          const tagName = tagMatch[1];
          const insertText = `</${tagName}>`;
          this.value = textBefore + '>' + insertText + this.value.substring(cursorPos);
          
          // Position cursor between the tags
          this.selectionStart = cursorPos + 1;
          this.selectionEnd = cursorPos + 1;
        }
      }
    });
    
    // Run the code
    function runCode() {
      const html = htmlEditor.value;
      const css = cssEditor.value;
      const js = jsEditor.value;
      
      const fullCode = `
        <!DOCTYPE html>
        <html>
          <head>
            <style>${css}</style>
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
          </head>
          <body>${html}
            <script>${js}<\/script>
          </body>
        </html>
      `;
      
      const blob = new Blob([fullCode], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      outputFrame.src = url;
      URL.revokeObjectURL(url);
    }
    
    // Format code
    function formatCode(type) {
      let editor, code;
      
      switch(type) {
        case 'html':
          editor = htmlEditor;
          code = editor.value;
          // Simple HTML formatting
          code = code.replace(/></g, '>\n<');
          break;
        case 'css':
          editor = cssEditor;
          code = editor.value;
          // Simple CSS formatting
          code = code.replace(/\{/g, ' {\n  ')
                    .replace(/\}/g, '\n}\n')
                    .replace(/;/g, ';\n  ');
          break;
        case 'js':
          editor = jsEditor;
          code = editor.value;
          // Simple JS formatting
          code = code.replace(/\{/g, ' {\n  ')
                    .replace(/\}/g, '\n}\n')
                    .replace(/;/g, ';\n');
          break;
      }
      
      editor.value = code;
    }
    
    // Load example code
    function loadExample() {
      htmlEditor.value = `<div class="container">
  <h1>Welcome to CodeWeb!</h1>
  <p>Edit this code and click "Run" to see changes.</p>
  <button onclick="showMessage()">Click Me</button>
</div>`;
      
      cssEditor.value = `body {
  font-family: Arial, sans-serif;
  padding: 20px;
}

.container {
  max-width: 600px;
  margin: 0 auto;
  text-align: center;
}

button {
  padding: 10px 20px;
  background: #4361ee;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}`;
      
      jsEditor.value = `function showMessage() {
  alert('Hello from CodeWeb!');
}`;
      
      runCode();
    }
    
    // Save code to localStorage
    function saveCode() {
      const codeData = {
        html: htmlEditor.value,
        css: cssEditor.value,
        js: jsEditor.value,
        savedAt: new Date().toLocaleString()
      };
      
      localStorage.setItem('codeweb-saved-code', JSON.stringify(codeData));
      alert('Code saved successfully!');
    }
    
    // Clear all editors
    function clearCode() {
      if (confirm('Are you sure you want to clear all code?')) {
        htmlEditor.value = '';
        cssEditor.value = '';
        jsEditor.value = '';
      }
    }
    
    // Toggle dark/light mode
    function toggleMode() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
    }
    
    // Toggle learning panel
    function toggleLearningPanel() {
      learningPanel.classList.toggle('show');
      overlay.classList.toggle('show');
      document.body.style.overflow = learningPanel.classList.contains('show') ? 'hidden' : '';
    }
    
    // Switch between tabs on mobile
    function switchTab(tab) {
      htmlPane.classList.remove('active');
      cssPane.classList.remove('active');
      jsPane.classList.remove('active');
      
      mobileTabButtons.forEach(btn => btn.classList.remove('active'));
      
      if (tab === 'html') {
        htmlPane.classList.add('active');
        mobileTabButtons[0].classList.add('active');
      } else if (tab === 'css') {
        cssPane.classList.add('active');
        mobileTabButtons[1].classList.add('active');
      } else if (tab === 'js') {
        jsPane.classList.add('active');
        mobileTabButtons[2].classList.add('active');
      }
    }
    
    // Insert code examples from learning panel
    function insertCode(type) {
      switch(type) {
        case 'html-basic':
          htmlEditor.value = `<h1>My First Heading</h1>
<p>My first paragraph.</p>`;
          break;
        case 'css-basic':
          cssEditor.value = `body {
  font-family: Arial, sans-serif;
  line-height: 1.6;
  margin: 0;
  padding: 20px;
}

.container {
  max-width: 800px;
  margin: 0 auto;
}`;
          break;
        case 'js-basic':
          jsEditor.value = `function greet() {
  alert('Hello World!');
}

greet();`;
          break;
        case 'html-form':
          htmlEditor.value = `<form>
  <label for="name">Name:</label>
  <input type="text" id="name" name="name">
  
  <label for="email">Email:</label>
  <input type="email" id="email" name="email">
  
  <button type="submit">Submit</button>
</form>`;
          break;
        case 'css-flex':
          cssEditor.value = `.flex-container {
  display: flex;
  gap: 10px;
}

.flex-item {
  flex: 1;
  padding: 20px;
  background: #f0f0f0;
}`;
          break;
        case 'js-event':
          jsEditor.value = `document.getElementById('myButton').addEventListener('click', function() {
  console.log('Button clicked!');
});`;
          break;
      }
      
      toggleLearningPanel();
    }
    
    // Close panel when clicking overlay
    overlay.addEventListener('click', toggleLearningPanel);
    
    // Initialize the app
    function init() {
      // Load saved code if exists
      const savedCode = localStorage.getItem('codeweb-saved-code');
      if (savedCode) {
        const codeData = JSON.parse(savedCode);
        htmlEditor.value = codeData.html;
        cssEditor.value = codeData.css;
        jsEditor.value = codeData.js;
      }
      
      // Apply saved theme
      if (localStorage.getItem('darkMode') === 'true') {
        document.body.classList.add('dark-mode');
      }
      
      // Run initial example
      loadExample();
      
      // Check if mobile device
      if (window.innerWidth <= 768) {
        switchTab('html');
      }
    }
    
    window.addEventListener('DOMContentLoaded', init);
    window.addEventListener('resize', function() {
      if (window.innerWidth > 768) {
        htmlPane.classList.add('active');
        cssPane.classList.add('active');
        jsPane.classList.add('active');
      } else {
        switchTab('html');
      }
    });
  </script>
</body>
</html>